<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Volunteer Schedule Calendar</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 1em;
      background-color: #f9f9f9;
    }
    h1 {
      text-align: center;
      color: #333;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 1em;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }
    th {
      background-color: #28a745;
      color: white;
    }
    tr:nth-child(even) {
      background-color: #f2f2f2;
    }
    select, input[type="date"] {
      margin: 0.5em 1em 1em 0;
      padding: 0.5em;
      font-size: 1em;
    }
    .filters {
      text-align: center;
      margin-bottom: 1em;
    }
    .back-link {
      text-align: center;
      margin-top: 2em;
    }
  </style>
</head>
<body>

<h1>Volunteer Schedule Calendar</h1>

<div class="filters">
  <label for="date-filter">Filter by Date:</label>
  <input type="date" id="date-filter" onchange="filterCalendar()" />

  <label for="role-filter">Filter by Role:</label>
  <select id="role-filter" onchange="filterCalendar()">
    <option value="All">All</option>
    <option value="Greeter">Greeter</option>
    <option value="Reader">Reader</option>
    <option value="Usher">Usher</option>
  </select>
</div>

<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Time</th>
      <th>Volunteer</th>
      <th>Role</th>
    </tr>
  </thead>
  <tbody id="calendar-body"></tbody>
</table>

<div class="back-link">
  <a id="back-link">‚Üê Back to Sign-Up Page</a>
</div>

<script>
let volunteerData = [];

fetch('volunteer_schedule.json')
  .then(response => response.json())
  .then(data => {
    volunteerData = data;
    renderCalendar(volunteerData);
  });

function renderCalendar(data) {
  const tableBody = document.getElementById('calendar-body');
  tableBody.innerHTML = '';
  data.forEach(entry => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${entry.date}</td>
      <td>${entry.time}</td>
      <td>${entry.volunteer}</td>
      <td>${entry.role}</td>
    `;
    tableBody.appendChild(row);
  });
}

function filterCalendar() {
  const selectedRole = document.getElementById('role-filter').value;
  const selectedDate = document.getElementById('date-filter').value;

  let filtered = volunteerData;

  if (selectedRole !== 'All') {
    filtered = filtered.filter(e => e.role === selectedRole);
  }

  if (selectedDate) {
    filtered = filtered.filter(e => e.date === selectedDate);
  }

  renderCalendar(filtered);
}

// Dynamically generate link back to the index page
(function() {
  const basePath = location.pathname.split('/').slice(0, -1).join('/');
  document.getElementById('back-link').href = location.origin + basePath + '/index.html';
})();
</script>

</body>
</html>
